<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <main><p>bla</p></main>

    <script>
        async function getCoordinates(cityName) {
            const weatherCodes = {
0: 'â˜€ Clear sky', 1: 'ğŸŒ¤ Mainly clear', 2: 'â›… Partly cloudy', 3:
'â˜ Overcast',
45: 'ğŸŒ« Foggy', 48: 'ğŸŒ« Depositing rime fog', 51: 'ğŸŒ¦ Light
drizzle',
53: 'ğŸŒ¦ Moderate drizzle', 55: 'ğŸŒ¦ Dense drizzle', 61: 'ğŸŒ§ Slight
rain',
63: 'ğŸŒ§ Moderate rain', 65: 'ğŸŒ§ Heavy rain', 71: 'ğŸŒ¨ Slight snow',
73: 'ğŸŒ¨ Moderate snow', 75: 'ğŸŒ¨ Heavy snow', 77: 'â„ Snow grains',
80: 'ğŸŒ¦ Slight rain showers', 81: 'ğŸŒ¦ Moderate rain showers',
82: 'ğŸŒ¦ Violent rain showers', 85: 'ğŸŒ¨ Slight snow showers',
86: 'ğŸŒ¨ Heavy snow showers', 95: 'â›ˆ Thunderstorm',
96: 'â›ˆ Thunderstorm with slight hail', 99: 'â›ˆ Thunderstorm with
heavy hail'
};
async function getCurrentWeather() {
// 1. GÄƒseÈ™te elementele din DOM
const cityName = document.getElementById('city-current').value;
const resultDiv = document.getElementById('current-weather-result');
// 2. AratÄƒ un mesaj de Ã®ncÄƒrcare
resultDiv.innerHTML = '<p class="loading">Loading...</p>';
try {
// 3. Preluare coordonate
const location = await getCoordinates(cityName);
// 4. Preluare date meteo

const response = await fetch(`https://api.open-
meteo.com/v1/forecast?latitude=${location.lat}&longitude=${location.lon}&current_

weather=true&timezone=auto`);
const data = await response.json();
const weather = data.current_weather;
// 5. ConstruieÈ™te HTML-ul È™i injecteazÄƒ-l Ã®n DOM
resultDiv.innerHTML = `
<div class="weather-data">
<p><strong>ğŸ“ Location:</strong> ${location.name},
${location.country}</p>
<p><strong>ğŸŒ¡ Temperature:</strong>
${weather.temperature}Â°C</p>
<p><strong>ğŸ’¨ Wind Speed:</strong> ${weather.windspeed}
km/h</p>
<p><strong>ğŸ§­ Wind Direction:</strong>
${weather.winddirection}Â°</p>
<p><strong>ğŸŒ¤ Condition:</strong>
${weatherCodes[weather.weathercode] || 'Unknown'}</p>
<p><strong>ğŸ• Time:</strong> ${weather.time}</p>
</div>
};
} catch (error) {
// 6. Gestionare erori
resultDiv.innerHTML = `<p class="error">âŒ Error:
${error.message}</p>`;
}
}

const response = await fetch(`https://geocoding-api.open-
meteo.com/v1/search?name=${encodeURIComponent(cityName)}&count=1&language=en&form

at=json`);
const data = await response.json();
if (!data.results || data.results.length === 0) {
throw new Error('City not found. Please check the spelling.');

}
return {
lat: data.results[0].latitude,
lon: data.results[0].longitude,
name: data.results[0].name,
country: data.results[0].country,
admin1: data.results[0].admin1
};
}
    </script>
</body>
</html>
